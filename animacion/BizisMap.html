<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <style>
      body {
        background-color: black;
      }

      #graph-container {
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        position: absolute;
        /*cursor: none;*/
      }

      #net-label {
        position: absolute;
        bottom: 20px;
        right: 20px;:q!:
        font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        font-size: 12px;
        font-weight: bold;
        color: white;
        text-align: right;
      }

      #year-label {
        position: absolute;
        top: 20px;
        right: 20px;
        font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        font-size: 30px;
        /*font-size: 12px;*/
        font-weight: bold;
        color: white;
        text-align: right;
      }

      #frame-label {
        position: absolute;
        top: 20px;
        left: 20px;
        font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        font-size: 16px;
        /*font-size: 12px;*/
        font-weight: bold;
        color: white;
        text-align: left;
      }
    </style>
  </head>
 <body>
    <div id="graph-container"></div>
    <span id="net-label"></span>
    <span id="year-label"></span>
    <span id="frame-label"></span>
<script src="sigma.js"></script>
<script src="moment-with-locales.js"></script>
<script>
   //fecha inicial
    var defaultbase="20140217";
    if (location.hash.length==9) {
	    defaultbase=location.hash.substr(1);
    }
	//Diccionarios de OPENSTRET MAP, via http://overpass-turbo.eu
parqueGrande= [
    { "lat": 41.6330476, "lon": -0.8918600 },
    { "lat": 41.6326447, "lon": -0.8918151 },
    { "lat": 41.6319389, "lon": -0.8916992 },
    { "lat": 41.6305901, "lon": -0.8921349 },
    { "lat": 41.6301776, "lon": -0.8923301 },
    { "lat": 41.6300754, "lon": -0.8924327 },
    { "lat": 41.6299551, "lon": -0.8926198 },
    { "lat": 41.6298914, "lon": -0.8931824 },
    { "lat": 41.6297872, "lon": -0.8944806 },
    { "lat": 41.6297355, "lon": -0.8951110 },
    { "lat": 41.6297334, "lon": -0.8956056 },
    { "lat": 41.6297311, "lon": -0.8961329 },
    { "lat": 41.6286879, "lon": -0.8976447 },
    { "lat": 41.6293760, "lon": -0.8989162 },
    { "lat": 41.6301364, "lon": -0.9004384 },
    { "lat": 41.6305082, "lon": -0.9000313 },
    { "lat": 41.6307099, "lon": -0.8996172 },
    { "lat": 41.6311008, "lon": -0.8993843 },
    { "lat": 41.6312439, "lon": -0.8991650 },
    { "lat": 41.6312937, "lon": -0.8989429 },
    { "lat": 41.6313331, "lon": -0.8987881 },
    { "lat": 41.6313943, "lon": -0.8986446 },
    { "lat": 41.6315127, "lon": -0.8985135 },
    { "lat": 41.6317271, "lon": -0.8984810 },
    { "lat": 41.6322635, "lon": -0.8985860 },
    { "lat": 41.6328873, "lon": -0.8985367 },
    { "lat": 41.6330707, "lon": -0.8984424 },
    { "lat": 41.6331897, "lon": -0.8983384 },
    { "lat": 41.6337676, "lon": -0.8980403 },
    { "lat": 41.6338550, "lon": -0.8981960 },
    { "lat": 41.6339792, "lon": -0.8984316 },
    { "lat": 41.6340941, "lon": -0.8986036 },
    { "lat": 41.6343178, "lon": -0.8987720 },
    { "lat": 41.6345393, "lon": -0.8987049 },
    { "lat": 41.6347091, "lon": -0.8985816 },
    { "lat": 41.6348931, "lon": -0.8985466 },
    { "lat": 41.6351876, "lon": -0.8986576 },
    { "lat": 41.6353169, "lon": -0.8987209 },
    { "lat": 41.6357414, "lon": -0.8988145 },
    { "lat": 41.6359710, "lon": -0.8989115 },
    { "lat": 41.6361495, "lon": -0.8989344 },
    { "lat": 41.6364935, "lon": -0.8988354 },
    { "lat": 41.6366941, "lon": -0.8986375 },
    { "lat": 41.6370836, "lon": -0.8981378 },
    { "lat": 41.6371387, "lon": -0.8979929 },
    { "lat": 41.6372125, "lon": -0.8978246 },
    { "lat": 41.6372463, "lon": -0.8974719 },
    { "lat": 41.6372473, "lon": -0.8972631 },
    { "lat": 41.6374917, "lon": -0.8953644 },
    { "lat": 41.6375485, "lon": -0.8948632 },
    { "lat": 41.6373842, "lon": -0.8947762 },
    { "lat": 41.6368544, "lon": -0.8945750 },
    { "lat": 41.6367738, "lon": -0.8945375 },
    { "lat": 41.6365991, "lon": -0.8944633 },
    { "lat": 41.6365382, "lon": -0.8944127 },
    { "lat": 41.6350142, "lon": -0.8932148 },
    { "lat": 41.6348098, "lon": -0.8930491 },
    { "lat": 41.6347642, "lon": -0.8930131 },
    { "lat": 41.6344793, "lon": -0.8927884 },
    { "lat": 41.6344325, "lon": -0.8927504 },
    { "lat": 41.6343893, "lon": -0.8927153 },
    { "lat": 41.6337323, "lon": -0.8921817 },
    { "lat": 41.6336587, "lon": -0.8921219 },
    { "lat": 41.6333364, "lon": -0.8918769 },
    { "lat": 41.6330476, "lon": -0.8918600 }
  ];
parqueDelAgua=[
    { "lat": 41.6794634, "lon": -0.9003370 },
    { "lat": 41.6801365, "lon": -0.9001042 },
    { "lat": 41.6800523, "lon": -0.8994235 },
    { "lat": 41.6797173, "lon": -0.8994922 },
    { "lat": 41.6793806, "lon": -0.8995379 },
    { "lat": 41.6792204, "lon": -0.8995110 },
    { "lat": 41.6791322, "lon": -0.8996183 },
    { "lat": 41.6788477, "lon": -0.8996344 },
    { "lat": 41.6779489, "lon": -0.8993138 },
    { "lat": 41.6767171, "lon": -0.8989925 },
    { "lat": 41.6764918, "lon": -0.8989755 },
    { "lat": 41.6759085, "lon": -0.8988863 },
    { "lat": 41.6757853, "lon": -0.8988752 },
    { "lat": 41.6755985, "lon": -0.8986245 },
    { "lat": 41.6755189, "lon": -0.8985937 },
    { "lat": 41.6753474, "lon": -0.8985273 },
    { "lat": 41.6747431, "lon": -0.8983832 },
    { "lat": 41.6746166, "lon": -0.8983599 },
    { "lat": 41.6739140, "lon": -0.8981872 },
    { "lat": 41.6736609, "lon": -0.8981474 },
    { "lat": 41.6726389, "lon": -0.8980534 },
    { "lat": 41.6722493, "lon": -0.8980931 },
    { "lat": 41.6720305, "lon": -0.8982228 },
    { "lat": 41.6719432, "lon": -0.8983426 },
    { "lat": 41.6718384, "lon": -0.8985679 },
    { "lat": 41.6718079, "lon": -0.8987162 },
    { "lat": 41.6716051, "lon": -0.8997031 },
    { "lat": 41.6701666, "lon": -0.9059921 },
    { "lat": 41.6700607, "lon": -0.9064986 },
    { "lat": 41.6700408, "lon": -0.9065801 },
    { "lat": 41.6700261, "lon": -0.9066369 },
    { "lat": 41.6698868, "lon": -0.9071942 },
    { "lat": 41.6698461, "lon": -0.9073116 },
    { "lat": 41.6697588, "lon": -0.9075639 },
    { "lat": 41.6696142, "lon": -0.9079016 },
    { "lat": 41.6694115, "lon": -0.9082715 },
    { "lat": 41.6691611, "lon": -0.9085987 },
    { "lat": 41.6689176, "lon": -0.9088462 },
    { "lat": 41.6686348, "lon": -0.9090550 },
    { "lat": 41.6684629, "lon": -0.9091536 },
    { "lat": 41.6682942, "lon": -0.9092305 },
    { "lat": 41.6680890, "lon": -0.9092973 },
    { "lat": 41.6678825, "lon": -0.9093417 },
    { "lat": 41.6677463, "lon": -0.9093497 },
    { "lat": 41.6676934, "lon": -0.9093528 },
    { "lat": 41.6675616, "lon": -0.9093606 },
    { "lat": 41.6673161, "lon": -0.9093259 },
    { "lat": 41.6672153, "lon": -0.9093052 },
    { "lat": 41.6669927, "lon": -0.9092339 },
    { "lat": 41.6667735, "lon": -0.9091301 },
   // { "lat": 41.6660903, "lon": -0.9086787 },
    { "lat": 41.6659266+0.0001, "lon": -0.9090948 },
   // { "lat": 41.6652784, "lon": -0.9107427 },
   // { "lat": 41.6648617, "lon": -0.9131460 },
    { "lat": 41.6648305+0.0004, "lon": -0.9149829 },
    { "lat": 41.6647975+0.0005, "lon": -0.9169225 },
    { "lat": 41.6651743+0.001, "lon": -0.9189975 },
   // { "lat": 41.6663685, "lon": -0.9204416 },
    { "lat": 41.6675491, "lon": -0.9207775+0.0008 },
   // { "lat": 41.6676508, "lon": -0.9208064 },
    { "lat": 41.6686767, "lon": -0.9200983 },
    { "lat": 41.6699269, "lon": -0.9190039 },
    { "lat": 41.6710810, "lon": -0.9175233 },
  //  { "lat": 41.6721719, "lon": -0.9153298 },
    { "lat": 41.6730364, "lon": -0.9115796 },
    { "lat": 41.6739690, "lon": -0.9083484 },
    { "lat": 41.6742853, "lon": -0.9074066 },
    { "lat": 41.6747576, "lon": -0.9061894 },
    { "lat": 41.6749139, "lon": -0.9058946 },
    { "lat": 41.6750382, "lon": -0.9056188 },
    { "lat": 41.6751554, "lon": -0.9053526 },
  //  { "lat": 41.6751929, "lon": -0.9049943 },
  //  { "lat": 41.6752122, "lon": -0.9047582 },
  //  { "lat": 41.6751767, "lon": -0.9045918 },
  //  { "lat": 41.6751173, "lon": -0.9044127 },
  //  { "lat": 41.6749423, "lon": -0.9045110 },
  //  { "lat": 41.6746635, "lon": -0.9050729 },
  //  { "lat": 41.6744762, "lon": -0.9050849 },
  //  { "lat": 41.6735883, "lon": -0.9071408 },
  //  { "lat": 41.6730047, "lon": -0.9080186 },
  //  { "lat": 41.6727089, "lon": -0.9093670 },
  //  { "lat": 41.6725965, "lon": -0.9103871 },
  //  { "lat": 41.6724996, "lon": -0.9107534 },
  //  { "lat": 41.6722987, "lon": -0.9101555 },
  //  { "lat": 41.6726283, "lon": -0.9083712 },
  //  { "lat": 41.6733172, "lon": -0.9068646 },
  //  { "lat": 41.6744632, "lon": -0.9046008 },
  // { "lat": 41.6754396, "lon": -0.9034178 },
  //  { "lat": 41.6779179, "lon": -0.9007729 },
  //  { "lat": 41.6792827, "lon": -0.9002440 },
    { "lat": 41.6794634, "lon": -0.9003370 }
  ];

z0=[
    { "lat": 41.6536804, "lon": -0.8834257 },
    { "lat": 41.6534094, "lon": -0.8829790 },
    { "lat": 41.6533786, "lon": -0.8829269 },
    { "lat": 41.6532446, "lon": -0.8826598 },
    { "lat": 41.6529950, "lon": -0.8821404 },
    { "lat": 41.6525777, "lon": -0.8812721 },
    { "lat": 41.6525669, "lon": -0.8812538 },
	//plaza
        { "lat": 41.6516184, "lon": -0.8794206 },
    { "lat": 41.6515828, "lon": -0.8793153 },
    { "lat": 41.6515363, "lon": -0.8791765 },
    { "lat": 41.6514929, "lon": -0.8790510 },
    { "lat": 41.6513086, "lon": -0.8785125 },
    { "lat": 41.6511362, "lon": -0.8779957 },
    { "lat": 41.6510697, "lon": -0.8777991 },
	  { "lat": 41.6508311, "lon": -0.8770957 },
    { "lat": 41.6508013, "lon": -0.8770082 },
    { "lat": 41.6507170, "lon": -0.8767513 },
    { "lat": 41.6506705, "lon": -0.8766057 },
    { "lat": 41.6506541, "lon": -0.8765566 },
	  { "lat": 41.6506541, "lon": -0.8765566 },
    { "lat": 41.6506544, "lon": -0.8765041 },
    { "lat": 41.6506592, "lon": -0.8764379 },
    { "lat": 41.6506705, "lon": -0.8763838 }, { "lat": 41.6506705, "lon": -0.8763838 },
    { "lat": 41.6507573, "lon": -0.8761260 },
	{ "lat": 41.6510940, "lon": -0.8750734 },
    { "lat": 41.6511463, "lon": -0.8749097 },
    { "lat": 41.6511657, "lon": -0.8748490 },
    { "lat": 41.6512197, "lon": -0.8746804 },
    { "lat": 41.6514954, "lon": -0.8738184 },
    { "lat": 41.6515252, "lon": -0.8737214 },
    { "lat": 41.6515411, "lon": -0.8736765 },
    { "lat": 41.6515531, "lon": -0.8736461 },
    { "lat": 41.6515711, "lon": -0.8736107 },
    { "lat": 41.6515879, "lon": -0.8735830 },
    { "lat": 41.6516088, "lon": -0.8735520 },
    { "lat": 41.6516296, "lon": -0.8735256 },
    { "lat": 41.6518705, "lon": -0.8732387 },
    { "lat": 41.6519186, "lon": -0.8731786 },
    { "lat": 41.6519888, "lon": -0.8730901 },
    { "lat": 41.6520426, "lon": -0.8730222 },
    { "lat": 41.6520493, "lon": -0.8730138 },
    { "lat": 41.6524903, "lon": -0.8725215 },
    { "lat": 41.6526966, "lon": -0.8722926 },
    { "lat": 41.6527420, "lon": -0.8722421 },
    { "lat": 41.6528178, "lon": -0.8721626 },
    { "lat": 41.6529021, "lon": -0.8720740 },
    { "lat": 41.6530433, "lon": -0.8719191 },
    { "lat": 41.6531111, "lon": -0.8718476 },
    { "lat": 41.6531406, "lon": -0.8718228 },
    { "lat": 41.6531721, "lon": -0.8718032 },

	//
   { "lat": 41.6534558, "lon": -0.8718231 },
    { "lat": 41.6535271, "lon": -0.8718154 },
    { "lat": 41.6536169, "lon": -0.8717972 },
    { "lat": 41.6537147, "lon": -0.8717645 },
    { "lat": 41.6538986, "lon": -0.8716900 },
    { "lat": 41.6540691, "lon": -0.8715962 },
      { "lat": 41.6545111, "lon": -0.8717015 },
    { "lat": 41.6545309, "lon": -0.8717885 },
    { "lat": 41.6545790, "lon": -0.8718985 },
    { "lat": 41.6547332, "lon": -0.8722169 },
    { "lat": 41.6547639, "lon": -0.8722872 },
    { "lat": 41.6548009, "lon": -0.8723795 },
    { "lat": 41.6548428, "lon": -0.8724923 },
    { "lat": 41.6549548, "lon": -0.8728230 },
    { "lat": 41.6550160, "lon": -0.8730000 },
    { "lat": 41.6550687, "lon": -0.8731563 },
	    { "lat": 41.6561136, "lon": -0.8759680 },
    { "lat": 41.6561988, "lon": -0.8761798 },
    { "lat": 41.6563736, "lon": -0.8766103 },
    { "lat": 41.6565286, "lon": -0.8769428 },
    { "lat": 41.6568332, "lon": -0.8775235 },
    { "lat": 41.6569892, "lon": -0.8778366 },
    { "lat": 41.6573796, "lon": -0.8787403 },
    { "lat": 41.6574122, "lon": -0.8788267 },
    { "lat": 41.6574380, "lon": -0.8789080 },
    { "lat": 41.6574604, "lon": -0.8790085 },
    { "lat": 41.6574700, "lon": -0.8790935 },
    { "lat": 41.6574794, "lon": -0.8791547 },
    { "lat": 41.6577276, "lon": -0.8807199 },
    { "lat": 41.6577777, "lon": -0.8809752 },
    { "lat": 41.6578016, "lon": -0.8810945 },
    { "lat": 41.6578329, "lon": -0.8812361 },
    { "lat": 41.6578462, "lon": -0.8812898 },
    { "lat": 41.6578752, "lon": -0.8814123 },
	{ "lat": 41.6578854, "lon": -0.8814635 },
	  { "lat": 41.6578245, "lon": -0.8814971 },
    { "lat": 41.6577472, "lon": -0.8815591 },
    { "lat": 41.6577159, "lon": -0.8815854 },
    { "lat": 41.6577028, "lon": -0.8815973 },
    { "lat": 41.6575386, "lon": -0.8817241 },
    { "lat": 41.6569746, "lon": -0.8822249 },
    { "lat": 41.6567615, "lon": -0.8824193 },
	    { "lat": 41.6566299, "lon": -0.8827072 },
    { "lat": 41.6562575, "lon": -0.8830367 },
    { "lat": 41.6559364, "lon": -0.8833353 },
    { "lat": 41.6558369, "lon": -0.8834253 },
	 { "lat": 41.6554441, "lon": -0.8837807 },
    { "lat": 41.6553827, "lon": -0.8838344 },
    { "lat": 41.6552297, "lon": -0.8839517 },
    { "lat": 41.6551438, "lon": -0.8840128 },
    { "lat": 41.6550480, "lon": -0.8840769 },
    { "lat": 41.6549345, "lon": -0.8841390 },
    { "lat": 41.6548571, "lon": -0.8841802 },
    { "lat": 41.6547929, "lon": -0.8842083 },
    { "lat": 41.6547200, "lon": -0.8842297 },
    { "lat": 41.6546507, "lon": -0.8842355 },
    { "lat": 41.6545673, "lon": -0.8842341 },
    { "lat": 41.6544886, "lon": -0.8842259 },
    { "lat": 41.6543768, "lon": -0.8842049 },
    { "lat": 41.6542953, "lon": -0.8841804 },
    { "lat": 41.6542395, "lon": -0.8841608 },
    { "lat": 41.6541688, "lon": -0.8841249 },
    { "lat": 41.6541388, "lon": -0.8841039 },
    { "lat": 41.6540918, "lon": -0.8840602 },
    { "lat": 41.6540494, "lon": -0.8840046 },
    { "lat": 41.6540078, "lon": -0.8839329 },
    { "lat": 41.6539853, "lon": -0.8838939 },
  { "lat": 41.6536804, "lon": -0.8834257 },
    { "lat": 41.6534094, "lon": -0.8829790 },
]

z20 =[     { "lat": 41.6622261, "lon": -0.8895949 },
    { "lat": 41.6599920, "lon": -0.8917884 },  { "lat": 41.6584472, "lon": -0.8927830 },
    { "lat": 41.6575332, "lon": -0.8932657 },
  { "lat": 41.6571444, "lon": -0.8934863 },
    { "lat": 41.6570678, "lon": -0.8935213 },
    { "lat": 41.6569980, "lon": -0.8935458 },
    { "lat": 41.6568209, "lon": -0.8935909 },
    { "lat": 41.6566173, "lon": -0.8936339 },
    { "lat": 41.6565287, "lon": -0.8936565 },
    { "lat": 41.6564527, "lon": -0.8936750 },
	  { "lat": 41.6557169, "lon": -0.8937699 },
    { "lat": 41.6555290, "lon": -0.8937487 },
    { "lat": 41.6553565, "lon": -0.8937243 },
    { "lat": 41.6550337, "lon": -0.8936566 },
    { "lat": 41.6549231, "lon": -0.8936290 },
	  { "lat": 41.6535618, "lon": -0.8933466 },
    { "lat": 41.6534921, "lon": -0.8933515 },
    { "lat": 41.6534224, "lon": -0.8933592 },
    { "lat": 41.6533324, "lon": -0.8933718 },
    { "lat": 41.6526808, "lon": -0.8934782 },
    { "lat": 41.6523159, "lon": -0.8935320 },
    { "lat": 41.6521918, "lon": -0.8935523 },
    { "lat": 41.6520918, "lon": -0.8935668 },
    { "lat": 41.6516851, "lon": -0.8936240 },
    { "lat": 41.6514688, "lon": -0.8936504 },
    { "lat": 41.6513661, "lon": -0.8936657 },
    { "lat": 41.6508390, "lon": -0.8937446 },
    { "lat": 41.6503208, "lon": -0.8938126 },
    { "lat": 41.6501827, "lon": -0.8938274 },
    { "lat": 41.6497621, "lon": -0.8938471 },
    { "lat": 41.6492330, "lon": -0.8938086 },
    { "lat": 41.6489960, "lon": -0.8937782 },
    { "lat": 41.6488589, "lon": -0.8937633 },
	  { "lat": 41.6429032, "lon": -0.8883498 },
    { "lat": 41.6428634, "lon": -0.8882127 },
    { "lat": 41.6426622, "lon": -0.8874847 },
	 { "lat": 41.6415802, "lon": -0.8850139 },
    { "lat": 41.6415035, "lon": -0.8848606 },
    { "lat": 41.6414121, "lon": -0.8846783 },
    { "lat": 41.6411593, "lon": -0.8841650 },
    { "lat": 41.6411287, "lon": -0.8841100 },
    { "lat": 41.6410474, "lon": -0.8839558 },
	//torres
	  { "lat": 41.6410701, "lon": -0.8837499 },
    { "lat": 41.6411075, "lon": -0.8836916 },
    { "lat": 41.6411261, "lon": -0.8836646 },
    { "lat": 41.6413468, "lon": -0.8833754 },
    { "lat": 41.6420289, "lon": -0.8824815 },
    { "lat": 41.6423098, "lon": -0.8821109 },
	 { "lat": 41.6429181, "lon": -0.8813014 },
    { "lat": 41.6429570, "lon": -0.8812412 },
    { "lat": 41.6429918, "lon": -0.8811832 },
    { "lat": 41.6432061, "lon": -0.8807682 },
    { "lat": 41.6433315, "lon": -0.8805210 },
    { "lat": 41.6436669, "lon": -0.8798339 },
    { "lat": 41.6437350, "lon": -0.8796873 },
    { "lat": 41.6438117, "lon": -0.8795319 },
    { "lat": 41.6439777, "lon": -0.8791858 },
    { "lat": 41.6441068, "lon": -0.8789200 },
    { "lat": 41.6442633, "lon": -0.8785978 },
    { "lat": 41.6443213, "lon": -0.8784653 },
	 { "lat": 41.6452435, "lon": -0.8765861 },
    { "lat": 41.6456079, "lon": -0.8757918 },
    { "lat": 41.6458363, "lon": -0.8752995 },
    { "lat": 41.6460873, "lon": -0.8747534 },
    { "lat": 41.6462089, "lon": -0.8745103 },
    { "lat": 41.6463610, "lon": -0.8741642 },
    { "lat": 41.6464176, "lon": -0.8740341 },
    { "lat": 41.6468054, "lon": -0.8731417 },
    { "lat": 41.6468173, "lon": -0.8731144 },
    { "lat": 41.6468481, "lon": -0.8730440 },
	 { "lat": 41.6486956, "lon": -0.8667203 },
    { "lat": 41.6489178, "lon": -0.8658252 },
    { "lat": 41.6490184, "lon": -0.8654906 },
    { "lat": 41.6490799, "lon": -0.8653133 },
    { "lat": 41.6491395, "lon": -0.8651815 },
    { "lat": 41.6492467, "lon": -0.8649830 },
    { "lat": 41.6492977, "lon": -0.8648923 },
    { "lat": 41.6493487, "lon": -0.8648087 },
    { "lat": 41.6494020, "lon": -0.8647286 },
    { "lat": 41.6494723, "lon": -0.8646355 },
    { "lat": 41.6495488, "lon": -0.8645408 },
    { "lat": 41.6495966, "lon": -0.8644834 },
    { "lat": 41.6496549, "lon": -0.8644172 },
    { "lat": 41.6497318, "lon": -0.8643399 },
    { "lat": 41.6498028, "lon": -0.8642764 },
    { "lat": 41.6499298, "lon": -0.8641734 },
	//puente de la union
	    { "lat": 41.6514428, "lon": -0.8631617 },
    { "lat": 41.6541990, "lon": -0.8613367 },
	{ "lat": 41.6541990, "lon": -0.8613367 },
    { "lat": 41.6544009, "lon": -0.8611744 },
    { "lat": 41.6545897, "lon": -0.8610455 },
    { "lat": 41.6546888, "lon": -0.8609767 },
    { "lat": 41.6552180, "lon": -0.8606337 },
    { "lat": 41.6554360, "lon": -0.8604960 },
    { "lat": 41.6556027, "lon": -0.8604115 },
    { "lat": 41.6558241, "lon": -0.8603259 },
    { "lat": 41.6559790, "lon": -0.8602880 },
    { "lat": 41.6561456, "lon": -0.8602599 },
    { "lat": 41.6562981, "lon": -0.8602496 },
    { "lat": 41.6564550, "lon": -0.8602511 },
    { "lat": 41.6565790, "lon": -0.8602599 },
    { "lat": 41.6567282, "lon": -0.8602865 },
    { "lat": 41.6568681, "lon": -0.8603248 },
    { "lat": 41.6570286, "lon": -0.8603770 },
    { "lat": 41.6571897, "lon": -0.8604475 },
    { "lat": 41.6573389, "lon": -0.8605333 },
    { "lat": 41.6574861, "lon": -0.8606348 },
    { "lat": 41.6576023, "lon": -0.8607363 },
    { "lat": 41.6577268, "lon": -0.8608598 },
    { "lat": 41.6578258, "lon": -0.8609622 },
    { "lat": 41.6579991, "lon": -0.8611526 },
    { "lat": 41.6580403, "lon": -0.8612016 },
    { "lat": 41.6580610, "lon": -0.8612261 },
    { "lat": 41.6581161, "lon": -0.8612878 },
    { "lat": 41.6581710, "lon": -0.8613491 },
    { "lat": 41.6584996, "lon": -0.8617558 },
    { "lat": 41.6585766, "lon": -0.8618511 },
    { "lat": 41.6586982, "lon": -0.8619956 },
    { "lat": 41.6593380, "lon": -0.8627557 },
    { "lat": 41.6593672, "lon": -0.8627850 },
    { "lat": 41.6595697, "lon": -0.8629882 },
    { "lat": 41.6599821, "lon": -0.8633326 },
    { "lat": 41.6603942, "lon": -0.8636594 },
	{ "lat": 41.6632930, "lon": -0.8658794 },
    { "lat": 41.6638562, "lon": -0.8663626 },
    { "lat": 41.6640163, "lon": -0.8665081 },
    { "lat": 41.6643803, "lon": -0.8668796 },
    { "lat": 41.6644842, "lon": -0.8670000 },
    { "lat": 41.6648152, "lon": -0.8673744 },
    { "lat": 41.6651864, "lon": -0.8678692 },
    { "lat": 41.6652381, "lon": -0.8679438 },
    { "lat": 41.6653518, "lon": -0.8681143 },
    { "lat": 41.6653794, "lon": -0.8681555 },
    { "lat": 41.6655258, "lon": -0.8683989 },
    { "lat": 41.6658450, "lon": -0.8690540 },
	    { "lat": 41.6665595, "lon": -0.8718444 },
    { "lat": 41.6665621, "lon": -0.8719484 },
    { "lat": 41.6665745, "lon": -0.8724898 },
    { "lat": 41.6666047, "lon": -0.8738074 },
    { "lat": 41.6666164, "lon": -0.8742764 },
    { "lat": 41.6666229, "lon": -0.8745324 },
    { "lat": 41.6666310, "lon": -0.8752617 },
    { "lat": 41.6666451, "lon": -0.8760716 },
    { "lat": 41.6666597, "lon": -0.8764979 },
    { "lat": 41.6666618, "lon": -0.8766078 },
    { "lat": 41.6666705, "lon": -0.8773427 },
	{ "lat": 41.6666550, "lon": -0.8820666 },
    { "lat": 41.6665255, "lon": -0.8828099 },
    { "lat": 41.6664535, "lon": -0.8831459 },
    { "lat": 41.6663318, "lon": -0.8836449 },
    { "lat": 41.6661966, "lon": -0.8840785 },
    { "lat": 41.6660250, "lon": -0.8845871 },
	    { "lat": 41.6657438, "lon": -0.8852874 },
    { "lat": 41.6655630, "lon": -0.8856407 },
    { "lat": 41.6653858, "lon": -0.8859596 },
	 { "lat": 41.6650553, "lon": -0.8865141 },
    { "lat": 41.6649311, "lon": -0.8866918 },
    { "lat": 41.6647205, "lon": -0.8869776 },
    { "lat": 41.6644788, "lon": -0.8872720 },
    { "lat": 41.6643945, "lon": -0.8873715 },
    { "lat": 41.6641859, "lon": -0.8876011 },
    { "lat": 41.6637628, "lon": -0.8880515 },
    { "lat": 41.6633103, "lon": -0.8885019 },
    { "lat": 41.6630695, "lon": -0.8887447 },
    { "lat": 41.6630034, "lon": -0.8888113 },
	    { "lat": 41.6622261, "lon": -0.8895949 },
    { "lat": 41.6599920, "lon": -0.8917884 }

	];

z30=[
	 { "lat": 41.6667852, "lon": -0.9090700 },
    { "lat": 41.6639574, "lon": -0.9077069 },
	{ "lat": 41.6560231, "lon": -0.9091831 },
    { "lat": 41.6559933, "lon": -0.9093119 },
    { "lat": 41.6559792, "lon": -0.9094039 },
    { "lat": 41.6559731, "lon": -0.9095071 },
    { "lat": 41.6559734, "lon": -0.9095873 },
    { "lat": 41.6559813, "lon": -0.9096931 },
    { "lat": 41.6559964, "lon": -0.9097934 },
    { "lat": 41.6560177, "lon": -0.9098838 },
    { "lat": 41.6560640, "lon": -0.9100579 },
    { "lat": 41.6560822, "lon": -0.9101245 },
    { "lat": 41.6562921, "lon": -0.9107900 },
    { "lat": 41.6573094, "lon": -0.9138774 },
	    { "lat": 41.6581103, "lon": -0.9165782 },
    { "lat": 41.6581600, "lon": -0.9167601 },
    { "lat": 41.6582178, "lon": -0.9169720 },
    { "lat": 41.6586092, "lon": -0.9184157 },
    { "lat": 41.6586756, "lon": -0.9186563 },
    { "lat": 41.6587379, "lon": -0.9188968 },
	 { "lat": 41.6570358, "lon": -0.9214794 },
    { "lat": 41.6557738, "lon": -0.9209760 },
    { "lat": 41.6555651, "lon": -0.9208984 },
	    { "lat": 41.6534466, "lon": -0.9200568 },
    { "lat": 41.6532889, "lon": -0.9199945 },
    { "lat": 41.6532584, "lon": -0.9199824 },
    { "lat": 41.6518626, "lon": -0.9194303 },
    { "lat": 41.6516787, "lon": -0.9193576 },
	   { "lat": 41.6469088, "lon": -0.9173946 },
    { "lat": 41.6467803, "lon": -0.9173411 },
    { "lat": 41.6463082, "lon": -0.9171366 },
    { "lat": 41.6450781, "lon": -0.9165886 },
    { "lat": 41.6445912, "lon": -0.9163818 },
	    { "lat": 41.6358274, "lon": -0.9123277 },
    { "lat": 41.6355434, "lon": -0.9120389 },
    { "lat": 41.6354734, "lon": -0.9119483 },
    { "lat": 41.6352654, "lon": -0.9116631 },
    { "lat": 41.6350625, "lon": -0.9113354 },
    { "lat": 41.6348888, "lon": -0.9109959 },
    { "lat": 41.6346508, "lon": -0.9104907 },
    { "lat": 41.6342511, "lon": -0.9096114 },
    { "lat": 41.6341924, "lon": -0.9094774 },
    { "lat": 41.6340650, "lon": -0.9092105 },
    { "lat": 41.6340298, "lon": -0.9091357 },
    { "lat": 41.6339717, "lon": -0.9090124 },
	{ "lat": 41.6307142, "lon": -0.9020116 },
    { "lat": 41.6306130, "lon": -0.9018097 },
    { "lat": 41.6301055, "lon": -0.9008199 },
	{ "lat": 41.6280165, "lon": -0.8974584 },
    { "lat": 41.6278509, "lon": -0.8973559 },
    { "lat": 41.6276337, "lon": -0.8972451 },
    { "lat": 41.6272422, "lon": -0.8970657 },
    { "lat": 41.6269107, "lon": -0.8968994 },
    { "lat": 41.6267770, "lon": -0.8968331 },
    { "lat": 41.6266515, "lon": -0.8967537 },
    { "lat": 41.6264722, "lon": -0.8966234 },
    { "lat": 41.6262822, "lon": -0.8964702 },
    { "lat": 41.6261320, "lon": -0.8963339 },
    { "lat": 41.6259850, "lon": -0.8961915 },
    { "lat": 41.6258647, "lon": -0.8960674 },
    { "lat": 41.6257161, "lon": -0.8958983 },
    { "lat": 41.6255690, "lon": -0.8957117 },
    { "lat": 41.6254556, "lon": -0.8955488 },
    { "lat": 41.6253649, "lon": -0.8954117 },
    { "lat": 41.6252789, "lon": -0.8952655 },
    { "lat": 41.6251353, "lon": -0.8950024 },
    { "lat": 41.6250541, "lon": -0.8948344 },
    { "lat": 41.6249322, "lon": -0.8945580 },
    { "lat": 41.6248288, "lon": -0.8942748 },
    { "lat": 41.6247377, "lon": -0.8940165 },
    { "lat": 41.6246848, "lon": -0.8938533 },
    { "lat": 41.6245922, "lon": -0.8935672 },
    { "lat": 41.6242135, "lon": -0.8923981 },
    { "lat": 41.6241643, "lon": -0.8922377 },
    { "lat": 41.6240870, "lon": -0.8919325 },
    { "lat": 41.6240261, "lon": -0.8916324 },
    { "lat": 41.6239696, "lon": -0.8912270 },
    { "lat": 41.6239485, "lon": -0.8908880 },
    { "lat": 41.6239436, "lon": -0.8905368 },
    { "lat": 41.6239600, "lon": -0.8901565 },
    { "lat": 41.6239655, "lon": -0.8900517 },
    { "lat": 41.6240184, "lon": -0.8897133 },
    { "lat": 41.6240448, "lon": -0.8895653 },
    { "lat": 41.6240712, "lon": -0.8894449 },
    { "lat": 41.6240861, "lon": -0.8893786 },
    { "lat": 41.6241150, "lon": -0.8892792 },
    { "lat": 41.6241373, "lon": -0.8892008 },
	{ "lat": 41.6244587, "lon": -0.8878984 },
    { "lat": 41.6244698, "lon": -0.8878179 },
    { "lat": 41.6244901, "lon": -0.8876284 },
    { "lat": 41.6244958, "lon": -0.8875012 },
    { "lat": 41.6244988, "lon": -0.8873725 },
    { "lat": 41.6244963, "lon": -0.8872619 },
    { "lat": 41.6244856, "lon": -0.8871121 },
    { "lat": 41.6244349, "lon": -0.8867319 },
    { "lat": 41.6242901, "lon": -0.8859713 },
    { "lat": 41.6239219, "lon": -0.8840767 },
    { "lat": 41.6234671, "lon": -0.8817496 },
    { "lat": 41.6233928, "lon": -0.8814116 },
    { "lat": 41.6233314, "lon": -0.8811828 },
    { "lat": 41.6232767, "lon": -0.8809976 },
    { "lat": 41.6231608, "lon": -0.8806981 },
    { "lat": 41.6230398, "lon": -0.8804441 },
    { "lat": 41.6228991, "lon": -0.8802045 },
    { "lat": 41.6227536, "lon": -0.8799968 },
    { "lat": 41.6225858, "lon": -0.8797774 },
    { "lat": 41.6224451, "lon": -0.8796300 },
    { "lat": 41.6222970, "lon": -0.8794956 },
    { "lat": 41.6218133, "lon": -0.8790732 },
    { "lat": 41.6216368, "lon": -0.8789031 },
    { "lat": 41.6214482, "lon": -0.8787161 },
    { "lat": 41.6212526, "lon": -0.8784659 },
    { "lat": 41.6211240, "lon": -0.8782530 },
    { "lat": 41.6209929, "lon": -0.8779859 },
    { "lat": 41.6209011, "lon": -0.8777439 },
    { "lat": 41.6208239, "lon": -0.8774425 },
    { "lat": 41.6207640, "lon": -0.8771042 },
    { "lat": 41.6207451, "lon": -0.8769261 },
    { "lat": 41.6207423, "lon": -0.8767716 },
    { "lat": 41.6207458, "lon": -0.8765995 },
    { "lat": 41.6207621, "lon": -0.8763300 },
    { "lat": 41.6208058, "lon": -0.8760125 },
    { "lat": 41.6208388, "lon": -0.8758766 },
    { "lat": 41.6208727, "lon": -0.8757581 },
    { "lat": 41.6208727, "lon": -0.8757581 },
    { "lat": 41.6209168, "lon": -0.8755962 },
    { "lat": 41.6209509, "lon": -0.8754991 },
    { "lat": 41.6209811, "lon": -0.8754124 },
    { "lat": 41.6210330, "lon": -0.8752928 },
    { "lat": 41.6211433, "lon": -0.8750778 },
    { "lat": 41.6212902, "lon": -0.8748485 },
    { "lat": 41.6214493, "lon": -0.8746624 },
    { "lat": 41.6215712, "lon": -0.8745280 },
    { "lat": 41.6217026, "lon": -0.8744051 },
    { "lat": 41.6221588, "lon": -0.8740086 },
    { "lat": 41.6223776, "lon": -0.8738047 },
    { "lat": 41.6225660, "lon": -0.8736025 },
    { "lat": 41.6227834, "lon": -0.8733284 },
    { "lat": 41.6229716, "lon": -0.8730636 },
    { "lat": 41.6232059, "lon": -0.8726565 },
    { "lat": 41.6233810, "lon": -0.8723056 },
    { "lat": 41.6235391, "lon": -0.8718889 },
    { "lat": 41.6236191, "lon": -0.8716590 },
    { "lat": 41.6236994, "lon": -0.8713702 },
    { "lat": 41.6237828, "lon": -0.8710217 },
    { "lat": 41.6238611, "lon": -0.8705776 },
    { "lat": 41.6239346, "lon": -0.8701319 },
    { "lat": 41.6240082, "lon": -0.8697992 },
    { "lat": 41.6240715, "lon": -0.8696077 },
    { "lat": 41.6241219, "lon": -0.8694649 },
    { "lat": 41.6242191, "lon": -0.8692717 },
    { "lat": 41.6243341, "lon": -0.8691086 },
    { "lat": 41.6243796, "lon": -0.8690458 },
    { "lat": 41.6246053, "lon": -0.8688417 },
    { "lat": 41.6246333, "lon": -0.8688218 },
    { "lat": 41.6247522, "lon": -0.8687369 },
    { "lat": 41.6248452, "lon": -0.8686881 },
    { "lat": 41.6249360, "lon": -0.8686516 },
    { "lat": 41.6251597, "lon": -0.8685926 },
    { "lat": 41.6252389, "lon": -0.8685796 },
    { "lat": 41.6253825, "lon": -0.8685673 },
    { "lat": 41.6254132, "lon": -0.8685668 },
    { "lat": 41.6254708, "lon": -0.8685694 },
    { "lat": 41.6255603, "lon": -0.8685750 },
    { "lat": 41.6262204, "lon": -0.8686408 },
    { "lat": 41.6274183, "lon": -0.8687667 },
    { "lat": 41.6276213, "lon": -0.8687779 },
    { "lat": 41.6278403, "lon": -0.8687796 },
    { "lat": 41.6281295, "lon": -0.8687613 },
    { "lat": 41.6283014, "lon": -0.8687386 },
    { "lat": 41.6284679, "lon": -0.8686955 },
    { "lat": 41.6287678, "lon": -0.8686162 },
    { "lat": 41.6290217, "lon": -0.8685205 },
    { "lat": 41.6292455, "lon": -0.8684148 },
    { "lat": 41.6295120, "lon": -0.8682528 },
    { "lat": 41.6296929, "lon": -0.8681332 },
    { "lat": 41.6298814, "lon": -0.8679917 },
    { "lat": 41.6300659, "lon": -0.8678271 },
	//salto caretera castellon
   
    { "lat": 41.6353652, "lon": -0.8622047 },
    { "lat": 41.6353881, "lon": -0.8621829 },
    { "lat": 41.6355206, "lon": -0.8620670 },
    { "lat": 41.6359504, "lon": -0.8615997 },
    { "lat": 41.6376943, "lon": -0.8597549 },
    { "lat": 41.6378306, "lon": -0.8596155 },
    { "lat": 41.6381159, "lon": -0.8593437 },
    { "lat": 41.6384282, "lon": -0.8590844 },
    { "lat": 41.6387597, "lon": -0.8588458 },
    { "lat": 41.6390917, "lon": -0.8586513 },
    { "lat": 41.6394046, "lon": -0.8585056 },
    { "lat": 41.6398174, "lon": -0.8583639 },
    { "lat": 41.6400313, "lon": -0.8583011 },
    { "lat": 41.6402249, "lon": -0.8582590 },
    { "lat": 41.6411895, "lon": -0.8580763 },
    { "lat": 41.6413569, "lon": -0.8580452 },
    { "lat": 41.6423156, "lon": -0.8578668 },
    { "lat": 41.6425740, "lon": -0.8578164 },
    { "lat": 41.6428438, "lon": -0.8577599 },
    { "lat": 41.6430909, "lon": -0.8576867 },
    { "lat": 41.6433610, "lon": -0.8575746 },
    { "lat": 41.6436211, "lon": -0.8574589 },
    { "lat": 41.6441677, "lon": -0.8571463 },
    { "lat": 41.6444537, "lon": -0.8569796 },
    { "lat": 41.6446749, "lon": -0.8568507 },
    { "lat": 41.6447675, "lon": -0.8567967 },
    { "lat": 41.6453621, "lon": -0.8564395 },
    { "lat": 41.6454342, "lon": -0.8563984 },
    { "lat": 41.6457835, "lon": -0.8562015 },
    { "lat": 41.6462121, "lon": -0.8559551 },
    { "lat": 41.6463835, "lon": -0.8558673 },
    { "lat": 41.6470079, "lon": -0.8556188 },
    { "lat": 41.6478571, "lon": -0.8553906 },
    { "lat": 41.6483388, "lon": -0.8552621 },
    { "lat": 41.6486500, "lon": -0.8551726 },
    { "lat": 41.6494465, "lon": -0.8549767 },
    { "lat": 41.6496003, "lon": -0.8549469 },
	//ebro
	{ "lat": 41.6527102, "lon": -0.8541116 },
    { "lat": 41.6528323, "lon": -0.8540762 },
    { "lat": 41.6533703, "lon": -0.8539156 },
    { "lat": 41.6544251, "lon": -0.8536538 },
    { "lat": 41.6555165, "lon": -0.8533634 },
    { "lat": 41.6560952, "lon": -0.8532046 },
    { "lat": 41.6562802, "lon": -0.8531539 },
    { "lat": 41.6563586, "lon": -0.8531377 },
    { "lat": 41.6564919, "lon": -0.8531125 },
    { "lat": 41.6565959, "lon": -0.8530889 },
    { "lat": 41.6569873, "lon": -0.8530398 },
    { "lat": 41.6570473, "lon": -0.8530323 },
    { "lat": 41.6571306, "lon": -0.8530246 },
    { "lat": 41.6571591, "lon": -0.8530220 },
    { "lat": 41.6573915, "lon": -0.8530206 },
    { "lat": 41.6578536, "lon": -0.8530803 },
    { "lat": 41.6580763, "lon": -0.8531335 },
    { "lat": 41.6582572, "lon": -0.8531867 },
    { "lat": 41.6585222, "lon": -0.8532899 },
    { "lat": 41.6589398, "lon": -0.8534952 },
    { "lat": 41.6594198, "lon": -0.8538164 },
    { "lat": 41.6603614, "lon": -0.8545113 },
    { "lat": 41.6617506, "lon": -0.8555366 },
    { "lat": 41.6618255, "lon": -0.8555919 },
    { "lat": 41.6619454, "lon": -0.8556829 },
    { "lat": 41.6620423, "lon": -0.8557519 },
	 { "lat": 41.6706658, "lon": -0.8609917 },
    { "lat": 41.6707276, "lon": -0.8610220 },
    { "lat": 41.6715819, "lon": -0.8614409 },
    { "lat": 41.6718135, "lon": -0.8615544 },
    { "lat": 41.6726523, "lon": -0.8619824 },
    { "lat": 41.6729595, "lon": -0.8621392 },
    { "lat": 41.6730281, "lon": -0.8621743 },
    { "lat": 41.6730785, "lon": -0.8621996 },
	 { "lat": 41.6730785, "lon": -0.8621996 },
    { "lat": 41.6735609, "lon": -0.8624369 },
    { "lat": 41.6744862, "lon": -0.8629120 },
    { "lat": 41.6750969, "lon": -0.8632284 },
    { "lat": 41.6752019, "lon": -0.8633001 },
    { "lat": 41.6752980, "lon": -0.8633824 },
    { "lat": 41.6753921, "lon": -0.8634850 },
    { "lat": 41.6754541, "lon": -0.8635618 },
    { "lat": 41.6755149, "lon": -0.8636556 },
    { "lat": 41.6755652, "lon": -0.8637505 },
    { "lat": 41.6756163, "lon": -0.8638586 },
    { "lat": 41.6756541, "lon": -0.8639644 },  { "lat": 41.6758570, "lon": -0.8647083 },
    { "lat": 41.6766691, "lon": -0.8678568 },
    { "lat": 41.6767895, "lon": -0.8683222 },
    { "lat": 41.6768718, "lon": -0.8686403 },
	//Allende
	{ "lat": 41.6776199, "lon": -0.8716327 },
    { "lat": 41.6776412, "lon": -0.8717973 },
    { "lat": 41.6776555, "lon": -0.8719325 },
    { "lat": 41.6776674, "lon": -0.8720563 },
    { "lat": 41.6776771, "lon": -0.8722019 },
    { "lat": 41.6776819, "lon": -0.8723280 },
    { "lat": 41.6776869, "lon": -0.8724922 },
    { "lat": 41.6776901, "lon": -0.8726169 },
    { "lat": 41.6776901, "lon": -0.8727459 },
    { "lat": 41.6776901, "lon": -0.8728701 },
    { "lat": 41.6776861, "lon": -0.8730508 },
    { "lat": 41.6776788, "lon": -0.8732016 },
    { "lat": 41.6776691, "lon": -0.8733410 },
    { "lat": 41.6776597, "lon": -0.8734604 },
    { "lat": 41.6776484, "lon": -0.8735790 },
    { "lat": 41.6776276, "lon": -0.8737452 },
    { "lat": 41.6775958, "lon": -0.8739864 },
    { "lat": 41.6775713, "lon": -0.8741445 },
    { "lat": 41.6775396, "lon": -0.8743091 },
    { "lat": 41.6775097, "lon": -0.8744555 },
    { "lat": 41.6774994, "lon": -0.8745003 },
    { "lat": 41.6774610, "lon": -0.8746421 },
    { "lat": 41.6774275, "lon": -0.8747467 },
    { "lat": 41.6773525, "lon": -0.8749498 },
    { "lat": 41.6772750, "lon": -0.8751366 },
    { "lat": 41.6771842, "lon": -0.8753204 },
    { "lat": 41.6770897, "lon": -0.8754814 },
    { "lat": 41.6770613, "lon": -0.8755249 },
    { "lat": 41.6770154, "lon": -0.8755951 },
    { "lat": 41.6769108, "lon": -0.8757381 },
    { "lat": 41.6768132, "lon": -0.8758537 },
    { "lat": 41.6766405, "lon": -0.8760288 },
    { "lat": 41.6764844, "lon": -0.8761654 },
    { "lat": 41.6763585, "lon": -0.8762698 },
    { "lat": 41.6762583, "lon": -0.8763519 },
    { "lat": 41.6761701, "lon": -0.8764178 },
    { "lat": 41.6760803, "lon": -0.8764818 },
    { "lat": 41.6759277, "lon": -0.8765833 },
    { "lat": 41.6757841, "lon": -0.8766660 },
    { "lat": 41.6755599, "lon": -0.8767955 },
    { "lat": 41.6753943, "lon": -0.8768779 },
    { "lat": 41.6753151, "lon": -0.8769115 },
    { "lat": 41.6751936, "lon": -0.8769585 },
    { "lat": 41.6749558, "lon": -0.8770504 },
    { "lat": 41.6748042, "lon": -0.8770961 },
    { "lat": 41.6745698, "lon": -0.8771668 },
    { "lat": 41.6744151, "lon": -0.8772044 },
    { "lat": 41.6742549, "lon": -0.8772302 },
    { "lat": 41.6739974, "lon": -0.8772384 },
    { "lat": 41.6737984, "lon": -0.8772279 },
    { "lat": 41.6734309, "lon": -0.8771974 },
    { "lat": 41.6733651, "lon": -0.8771917 },
	//picasso
	{ "lat": 41.6730643, "lon": -0.8776447 },
    { "lat": 41.6730697, "lon": -0.8782612 },
    { "lat": 41.6730749, "lon": -0.8788496 },
    { "lat": 41.6730862, "lon": -0.8797739 },
    { "lat": 41.6730851, "lon": -0.8798664 },
	    { "lat": 41.6731038, "lon": -0.8832175 },
    { "lat": 41.6731060, "lon": -0.8833793 },
    { "lat": 41.6731108, "lon": -0.8837033 },
    { "lat": 41.6731190, "lon": -0.8840753 },
    { "lat": 41.6731216, "lon": -0.8843652 },
    { "lat": 41.6731270, "lon": -0.8850120 },
    { "lat": 41.6731356, "lon": -0.8860311 },
    { "lat": 41.6731359, "lon": -0.8866888 }, { "lat": 41.6730953, "lon": -0.8910654 },
    { "lat": 41.6730342, "lon": -0.8911988 },
    { "lat": 41.6729731, "lon": -0.8913509 },
    { "lat": 41.6729234, "lon": -0.8915053 },
    { "lat": 41.6728731, "lon": -0.8916837 },
    { "lat": 41.6728266, "lon": -0.8918956 },
    { "lat": 41.6726214, "lon": -0.8930996 },
    { "lat": 41.6725946, "lon": -0.8932791 },
    { "lat": 41.6725219, "lon": -0.8936455 },
    { "lat": 41.6724421, "lon": -0.8941228 },
    { "lat": 41.6723863, "lon": -0.8944563 },
    { "lat": 41.6721488, "lon": -0.8957375 },
	//ranillas
	  { "lat": 41.6708531, "lon": -0.9024289 },
    { "lat": 41.6704954, "lon": -0.9041082 },
    { "lat": 41.6704028, "lon": -0.9045424 },
    { "lat": 41.6703912, "lon": -0.9045968 },
    { "lat": 41.6703188, "lon": -0.9049361 },
    { "lat": 41.6700957, "lon": -0.9060174 },
    { "lat": 41.6700050, "lon": -0.9064611 },
    { "lat": 41.6699917, "lon": -0.9065134 },
    { "lat": 41.6699787, "lon": -0.9065714 },
    { "lat": 41.6698855, "lon": -0.9069247 },
    { "lat": 41.6698291, "lon": -0.9071433 },
    { "lat": 41.6697418, "lon": -0.9074241 },
    { "lat": 41.6696372, "lon": -0.9076687 },
    { "lat": 41.6695217, "lon": -0.9079388 },
    { "lat": 41.6693490, "lon": -0.9082447 },
    { "lat": 41.6691557, "lon": -0.9084989 },
    { "lat": 41.6690299, "lon": -0.9086373 },
    { "lat": 41.6689079, "lon": -0.9087468 },
    { "lat": 41.6687789, "lon": -0.9088543 },
    { "lat": 41.6686417, "lon": -0.9089490 },
    { "lat": 41.6684664, "lon": -0.9090512 },
    { "lat": 41.6682912, "lon": -0.9091348 },
    { "lat": 41.6680843, "lon": -0.9092056 },
    { "lat": 41.6679114, "lon": -0.9092410 },
    { "lat": 41.6677413, "lon": -0.9092641 },
    { "lat": 41.6676911, "lon": -0.9092709 },
    { "lat": 41.6675682, "lon": -0.9092702 },
    { "lat": 41.6674051, "lon": -0.9092554 },
    { "lat": 41.6671737, "lon": -0.9092122 },
    { "lat": 41.6669951, "lon": -0.9091559 },
    { "lat": 41.6667852, "lon": -0.9090700 },
	 { "lat": 41.6667852, "lon": -0.9090700 },
    { "lat": 41.6639574, "lon": -0.9077069 }
];


</script>
<script>
//utilidades de color
      function hexToRgb4(hex) {
        var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})|([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(hex);
        return result ? {
          r: parseInt(hex.length <= 4 ? result[4]+result[4] : result[1], 16),
          g: parseInt(hex.length <= 4 ? result[5]+result[5] : result[2], 16),
          b: parseInt(hex.length <= 4 ? result[6]+result[6] : result[3], 16),
          a: parseFloat(parseInt(hex.length <= 4 ? result[7]+result[7] : result[4], 16) / 255.0),
          toString: function() {
            var arr = [];
            arr.push(this.r);
            arr.push(this.g);
            arr.push(this.b);
            arr.push(this.a);
            return "rgba(" + arr.join(",") + ")";
          }
        } : null;
      }

      function rgbaChangeAlpha(rgba, alpha) {
        return rgba.replace(/,\d+(\.\d+)?\)/, ',' + alpha + ')');
      }

      function getRgbaAlpha(rgba) {
        return parseFloat(rgba.substring(rgba.lastIndexOf(',')+1, rgba.lastIndexOf(')')));
      }

</script>
<script>
      var g = {nodes: [], edges: []}
      var data = {}
      var l2id ={}
      //var defaultAnimColor= null; and then if null set to //s.graph.edges(0).realColor; 
      var defaultAnimColor="rgba(0,255,255,0.19607843137254902)";
      var defaultAnimColor="rgba(255,255,0,0.50)";



      data.net="bizi";
      data.min_year=0;
      cargagrafo=fetch("grafo.js",{
              cors:"true",
              credentials: 'include', //same-origin, omit
	      });
      grafo2date = async () => {
		response = await cargagrafo;
		json = await response.json();
		data.graph = json;
		pintadatos();
                loopAnimacion(0);
		}
      grafo2date();
        // altrnativamente:
      	//cargagrafo.then( (response) => {
      	//			   	response.json().then ( json => {
	//			    data.graph=json;
	//					});
	//			});


     function pintadatos() {
       var hideInAnimation = false;
       if (data.graph.edges.length > 10000) {
        var hideAlpha = 0.05;
      } else {
        var hideAlpha = 0.1;
      }

      for (var i=0; i<data.graph.nodes.length; i++) {
        var color = hexToRgb4(data.graph.nodes[i].c).toString();
        g.nodes.push({
          id: data.graph.nodes[i].id.toString(),
          db_id: data.graph.nodes[i].db_id,
          label: '',
          x: data.graph.nodes[i].x,
          y: data.graph.nodes[i].y,
          size: data.graph.nodes[i].s,
          color: (hideInAnimation) ? "rgba(0,0,0,0)" : rgbaChangeAlpha(color, hideAlpha),
          realColor: color,
          realLabel: data.graph.nodes[i].l,
        });
        l2id[data.graph.nodes[i].l]=data.graph.nodes[i].id.toString();
      }

      hideInAnimation = true;
      for (var i=0; i<data.graph.edges.length; i++) {
        var color = hexToRgb4(data.graph.edges[i].c).toString();
        //var alpha = getRgbaAlpha(color);
        g.edges.push({
          id: data.graph.edges[i].id.toString(),
          source: data.graph.edges[i].s,
          target: data.graph.edges[i].t,
          size: data.graph.edges[i].w,
          color: (hideInAnimation) ? "rgba(0,0,0,0)" : rgbaChangeAlpha(color, hideAlpha),
          realColor: color,
          //spinColor: rgbaChangeAlpha(color, (alpha < 0.3) ? alpha + 0.1 : alpha),
          weight: data.graph.edges[i].w,
          type: 'line', //curve',
        });
      }
       s.graph.read(g);
       s.refresh();       
       redrawCanvas(); 
     } //end pintadatos


     var settings = {
        batchEdgesDrawing: true,
        hideEdgesOnMove: true,
        defaultNodeColor: "#ec5148",
        defaultLabelColor: '#fff',
        enableHovering: false,
        labelThreshold: 6.0,
        labelSize: "proportional",
        zoomMax: 1.2,
        zoomMin: 1/32,
        sideMargin: 100,
        immutable: false,
	defaultEdgeType: "line",
      }

      var s = new sigma({
        graph: g,
        renderer: {
          container: document.getElementById('graph-container'),
          type: 'canvas'
        },
        settings: settings
      });


    function cloneCanvas(canvasDst, canvasOrg) {
        canvasDst.setAttribute("style", canvasOrg.getAttribute("style"));
        canvasDst.setAttribute("width", canvasOrg.getAttribute("width"));
        canvasDst.setAttribute("height", canvasOrg.getAttribute("height"));
      }

    function clearCanvas(ctx) {
        ctx.save();
        ctx.setTransform(1, 0, 0, 1, 0, 0);
        ctx.clearRect(0, 0, canvasRef.width, canvasRef.height);
        ctx.restore();
      }

   //globales de la operacion de dibujo

      var container = document.getElementById('graph-container');
      var canvasRef = container.firstChild;

      var canvasMap = document.createElement("canvas");
      var canvasNodes = document.createElement("canvas");
      var canvasEdges = document.createElement("canvas");
      var canvasMov = document.createElement("canvas");
    
      canvasNodes.setAttribute("class", "sigma-animation-nodes");
      canvasEdges.setAttribute("class", "sigma-animation-edges");
      canvasMov.setAttribute("class", "sigma-animation-mov");
      cloneCanvas(canvasMap, canvasRef);
      cloneCanvas(canvasNodes, canvasRef);
      cloneCanvas(canvasEdges, canvasRef);
      cloneCanvas(canvasMov, canvasRef);

      var mouseLayer = container.getElementsByClassName('sigma-mouse')[0];
      container.insertBefore(canvasEdges, mouseLayer);
      container.insertBefore(canvasMov, mouseLayer);
      container.insertBefore(canvasNodes, mouseLayer);

 
   var ebro=[[-0.9003160014,41.6837667213],
	[-0.9034917369,41.6762344548],
	[-0.9222886576,41.6702240354],
	[-0.9180829539,41.6636199410],
	[-0.9014747157,41.6674670687],
	[-0.8903596415,41.6614558306],
	[-0.8624217524,41.6529429577],
	[-0.8539245143,41.6509227887],
	[-0.8431098475,41.6488544549]];
	



   function proj(p) {
        //centro=longlat['89'] [-0.8858529095124769, 41.65827273141642]
        var px = p[0]+0.8858529095124769;
        var py = -(p[1]-41.65827273141642);
        //pos[x]=((longlat[x][0]-centro[0])*0.747*kilometro,-(longlat[x][1]-centro[1])*kilometro)
        //pos = 200*pos
        px = px * 0.747 * 10000 / 90 
	px = px * 200 ;
        py = py * 10000/90  * 200 ; 
        return [px,py];
    }

   function drawMap(ctx){
        //var ctx = canvasMap.getContext('2d');
        //clearCanvas(ctx);
        n0=s.renderers[0].nodesOnScreen[0];
        n1=s.renderers[0].nodesOnScreen[1];
        kx=(n1['renderer1:x']-n0['renderer1:x'])/(n1.x-n0.x);
        dx=n0['renderer1:x']-n0.x*kx;
        ky=(n1['renderer1:y']-n0['renderer1:y'])/(n1.y-n0.y);
        dy=n0['renderer1:y']-n0.y*ky;

  [parqueGrande,parqueDelAgua].forEach(parque => {
	ctx.beginPath();
	i=0;ox=0;oy=0;
	   parque.forEach( p => {
	   p=proj([p.lon,p.lat]);
	   qx= kx * p[0] +dx;
           qy= ky * p[1] +dy;
          mx = (qx + ox)/2;
          my = (qy + oy)/2;

       if (i == 0) {
            ctx.moveTo(qx, qy);
          } else if (i==1) {
            ctx.moveTo(mx,my);
          } else {
            ctx.quadraticCurveTo(ox,oy,mx,my);
          }
	  ox=qx;oy=qy;i=i+1; 
	   });
	ctx.closePath();
	ctx.fillStyle = "green";
	ctx.fill();
   });
    ctx.beginPath();
        ox=0;oy=0;
        for (var i=0; i < ebro.length; i ++ ){
          p=proj(ebro[i]);
          qx= kx * p[0] +dx;
          qy= ky * p[1] +dy;
          mx = (qx + ox)/2;
          my = (qy + oy)/2;
          if (i == 0) {
            ctx.moveTo(qx, qy);
          } else if (i==1) {
            ctx.moveTo(mx,my);
          } else {
            ctx.quadraticCurveTo(ox,oy,mx,my);
            //ctx.lineTo(qx, qy);
          }
          ox=qx;oy=qy;
        }
        ctx.lineWidth = 7.5;
        ctx.strokeStyle = "cadetblue"; //rgb(95,158,160)
        ctx.stroke();


  [z30,z20,z0].forEach(road => {
        ctx.beginPath();
        i=0;ox=0;oy=0;
           road.forEach( p => {
           p=proj([p.lon,p.lat]);
           qx= kx * p[0] +dx;
           qy= ky * p[1] +dy;
          mx = (qx + ox)/2;
          my = (qy + oy)/2;

       if (i == 0) {
            ctx.moveTo(qx, qy);
          } else if (i==1) {
            ctx.moveTo(mx,my);
          } else {
            ctx.quadraticCurveTo(ox,oy,mx,my);
          }
          ox=qx;oy=qy;i=i+1;
           });
        ctx.lineWidth = 2.5;
        //ctx.strokeStyle = "red"; //cadetblue"; //rgb(95,158,160)

        ctx.strokeStyle = "gray";
        ctx.stroke();
   });


  } //end DrawMap

   function drawEdges(movement) {
        var ctx = canvasEdges.getContext('2d');
        clearCanvas(ctx);
        drawMap(ctx);
	return;
        var edges = s.renderers[0].edgesOnScreen;
        //var edges = edgesOnScreen;
        for (var i=0; i<edges.length; i++) {
          var source = s.graph.nodes(edges[i].source);
          var target = s.graph.nodes(edges[i].target);
          var color = edges[i].realColor;
          var size = edges[i]['renderer1:size'];

          var x0 = source['renderer1:x'];
          var y0 = source['renderer1:y'];
          var x1 = target['renderer1:x'];
          var y1 = target['renderer1:y'];
          var ctrl = (source.id == target.id) ?
            sigma.utils.getSelfLoopControlPoints(x0, y0, source['renderer1:size']) :
            sigma.utils.getQuadraticControlPoint(x0, y0, x1, y1);

          ctx.beginPath();
          ctx.moveTo(x0, y0);
          if (source.id == target.id) {
            ctx.bezierCurveTo(ctrl.x1, ctrl.y1, ctrl.x2, ctrl.y2, x1, y1);
          } else {
	    ctx.lineTo(x1, y1);
            //ctx.quadraticCurveTo(ctrl.x, ctrl.y, x1, y1);
          }
          ctx.lineWidth = size;
          ctx.strokeStyle = color;
          ctx.stroke();
        }
      }

   function drawNodes() {
        /* Draw nodes and labels */
        var ctx = canvasNodes.getContext('2d');
        clearCanvas(ctx);

        var nodes = s.renderers[0].nodesOnScreen;
        //var nodes = nodesOnScreen;
        for (var i=0; i<nodes.length; i++) {
          var x = nodes[i]['renderer1:x'];
          var y = nodes[i]['renderer1:y'];
          var r = nodes[i]['renderer1:size'];
          var label = nodes[i].realLabel;
          var color = nodes[i].realColor;

          ctx.beginPath();
          ctx.arc(x, y, 1.5*r , 0, 2 * Math.PI, false);
          ctx.lineWidth = 1.1*r;
          var grd = ctx.createRadialGradient(x, y, 0.9*r, x, y, 2*r);
          grd.addColorStop(0, color);
          grd.addColorStop(1, "transparent");
          ctx.strokeStyle = grd;
          ctx.stroke();

          ctx.beginPath();
          ctx.arc(x, y, r , 0, 2 * Math.PI, false);
          var grd = ctx.createRadialGradient(x-r/2, y-r/2, 0.1*r, x, y, r);
          ctx.fillStyle = color;  // solid first. avoid transparency
          ctx.fill();
          grd.addColorStop(0, "rgba(255,255,255,0.8)");
          grd.addColorStop(1, color);
          ctx.fillStyle = grd;
          ctx.fill();

          // Label
          if (r < settings.labelThreshold)
            continue;

          if (!label || typeof label !== 'string')
            continue;

          ctx.font = r + 'px ' + 'arial';
          ctx.fillStyle = '#fff';

          ctx.fillText(label, Math.round(x + r + 3), Math.round(y + r / 3));
        }
      }


///
/// Redibujados
///

   var timer = null;
   var animationActive = false;
   var delay=80;

    function redrawCanvas(e) {
        clearTimeout(timer);
        var ctxMov = canvasMov.getContext('2d');
        clearCanvas(ctxMov);
        //getElementsOnScreen();
        drawNodes()
        drawEdges();
        if (animationActive)
          timer = setTimeout(runPeriod, delay);
      }

      function resizeCanvas() {
        cloneCanvas(canvasNodes, canvasRef);
        cloneCanvas(canvasEdges, canvasRef);
        cloneCanvas(canvasMov, canvasRef);
        redrawCanvas();
      }


window.addEventListener("resize", resizeCanvas);
s.camera.bind('coordinatesUpdated', redrawCanvas);

   
//////
////// ANIMACION PROPIAMENTE DICHA (aunque Canvas usa algn parametro)
//////

var animationMaxFrames = 11;
yearFrame = 0;
yearMaxFrames=50;//yearMaxFrames = Math.ceil(edges.length / 20) * animationMaxFrames;
yearEdges=[];
var activeTargets = {};


 function preparePeriod(eventsfromjson) {
	dia=moment(eventsfromjson.query, "YYYY-MM-DD HH:mm");
        document.getElementById('year-label').textContent = dia.locale("es").format("ddd DD/MM/YYYY HH:mm");
        events=eventsfromjson.answer;
        activeTargets = {};
        var edges = [];
    
        //if (events === undefined || events.length == 0) {}
        
        events.forEach( e =>{
                  edges.push({source: l2id[e[0]], target:l2id[e[1]]});
           })
		
        for (var i=0; i<edges.length; i++) {
          activeTargets[edges[i].target] = 0;
          edges[i].animationStep = 0;
          edges[i].animationStart = Math.ceil((yearMaxFrames -1 /* -animationMaxFrames */) * Math.random());
        }
        for (var i=0; i<yearEdges.length; i++) {
          if (yearEdges[i].animationStep < animationMaxFrames-1) {
            edges.push(yearEdges[i]);
            activeTargets[yearEdges[i].target] = 1 ; // tendria que ser +1 si Step >= 8
          }  
        }

        yearEdges = edges;
        //console.log(animationMaxFrames,edges);
      } //prepareYear


      function drawAnimation() { 
        var ctx = canvasMov.getContext('2d');
        //if (yearFrame == 1) {
        clearCanvas(ctx);
        //}
        var edges = yearEdges;
        var finished = 0;
        for (var i=0; i<edges.length; i++) {
          var edgeStep = edges[i].animationStep;
          var target = undefined;

          // Incr the acum target
          if (edgeStep == 8) {
            activeTargets[edges[i].target] += 1;
          }

          if (edgeStep >= 8 ) {
            var target = s.graph.nodes(edges[i].target);
            var x1 = target['renderer1:x'];
            var y1 = target['renderer1:y'];
            var r = target['renderer1:size'];
            var acum = activeTargets[edges[i].target];

            if (edgeStep == 8) { 
              var lineWidth = (1+Math.log(3*acum))*r; 
              var extR = (1+Math.log(1.05*acum))*r;
            } else { 
              var lineWidth = (1+Math.log(4*acum))*r; 
              var extR = (1+Math.log(1.1*acum))*r;
            }
            ctx.beginPath();
            ctx.arc(x1, y1, 1.5*r , 0, 2 * Math.PI, false);
            ctx.lineWidth = lineWidth;
            var grd = ctx.createRadialGradient(x1, y1, 0.9*r, x1, y1, extR);
            grd.addColorStop(0, rgbaChangeAlpha(target.realColor, 0.8));
            grd.addColorStop(1, "transparent");
            ctx.strokeStyle = grd;
            ctx.stroke();
          }
          // If the edge is moving or if the edge should start moving in this frame
          if ( (edgeStep > 0 && edgeStep < animationMaxFrames-1) || (edgeStep == 0 && edges[i].animationStart == yearFrame) ) {
            // Move the visible edges
              var source = s.graph.nodes(edges[i].source);
              var x0 = source['renderer1:x'];
              var y0 = source['renderer1:y'];
              if (target === undefined) {
                var target = s.graph.nodes(edges[i].target);
                var x1 = target['renderer1:x'];
                var y1 = target['renderer1:y'];
              
              var color = defaultAnimColor;
                  //s.graph.edges(0).realColor; //"rgba(0,255,255,0.19607843137254902)"
              var ctrl = (source.id == target.id) ?
                sigma.utils.getSelfLoopControlPoints(x0, y0, source['renderer1:size']) :
                sigma.utils.getQuadraticControlPoint(x0, y0, x1, y1);

              // Edge gradient
              ctx.beginPath();
              ctx.moveTo(x0, y0);
              if (source.id == target.id) {
                ctx.bezierCurveTo(ctrl.x1, ctrl.y1, ctrl.x2, ctrl.y2, x1, y1);
              } else {
		ctx.lineTo( x1, y1);
                //ctx.quadraticCurveTo(ctrl.x, ctrl.y, x1, y1);
              }
              ctx.lineWidth = 5; // original was 7;
              var gradient = ctx.createLinearGradient(x0, y0, x1, y1);
              var fractStep = (edgeStep+1) / (animationMaxFrames-1);
              gradient.addColorStop(0, "transparent");
              gradient.addColorStop(Math.max(0, fractStep-0.5), "transparent");
              gradient.addColorStop(fractStep, color);
              gradient.addColorStop(Math.min(1, fractStep+0.2), "transparent");
              gradient.addColorStop(1, "transparent");
              ctx.strokeStyle = gradient;
              ctx.stroke();
            }

            edges[i].animationStep += 1;
            if (edges[i].animationStep == animationMaxFrames-1) {
              finished += 1;
            }
          }
        }
        if (finished == yearEdges.length) {
          yearFrame = yearMaxFrames;
        } 
      }

var resolvePeriod = () => {};


function runPeriod () {
   yearFrame += 1;
   if (yearFrame < yearMaxFrames){
      //drawAnimation();
      inicio=new Date().getTime();
      timer=setTimeout(runPeriod,delay);
      drawAnimation(); //ojo a condicion de carrera aqui !!! 
      final = new Date().getTime();
      if (final - inicio > delay/3) {
        console.log("iteracion de", final - inicio," milliseconds", yearFrame);
      }
   } else {
      yearFrame=0;
      animationActive= false;
      resolvePeriod("hecho");
   }
}


periodoTerminado=Promise.resolve(0);

async function loopAnimacion(periodo) {
     response = fetch(preparaURL(periodo),{  
			      cors:"true",
        		      credentials: 'include', 
			      }).then( (r) => { return r.json() } );
     ambas = await Promise.all([response,periodoTerminado]);
     jsn = ambas[0];
     if (jsn.count > 0) {
     preparePeriod(jsn);
     periodoTerminado=new Promise( (resolve,reject) => {
            resolvePeriod = resolve;
            animationActive = true;
            runPeriod();
          });
     } else {
       document.getElementById('year-label').textContent="...";
       var ctx = canvasMov.getContext('2d');
       yearEdges=[];
       clearCanvas(ctx);
       periodoTerminado=new Promise( (r,f) => {
          setTimeout(r,100,"fromWait")
       });
     }
     var siguientePeriodo=periodo+1;
	if (siguientePeriodo <  24*3*365*3) {
	  loopAnimacion(siguientePeriodo);
          //setTimeout(loopAnimacion,0,siguientePeriodo); es mejor para el stack o no?
         } else {
         window.location.reload();
         
       }
}


//delay es 0.1 segundos
//un periodo por defecto son 5 segundos
//un traslado es 1 segundo.
//con muestras de 20 minutos, 
//si queremos ajustar 18 horas = 3 minutos = 180 segundos
//un traslado con animationMaxFrames=11 seria en tiempo real 6 minutos.
//y un periodo deberia durar 3.33 segundos
yearMaxFrames=34;


function preparaURL(periodo) { //API CALL GET
        base=moment(defaultbase,"YYYYMMDD");
        base.add(120+periodo*20,'minutes');
	//location.hash=base.format("YYYYMMDD");
        //console.log(base.unix(),base.toISOString(),base.format("YYYYMMDDhhmm"));
        return "http://193.146.116.108/apidemo/sample.js?table=bizi&sample=0.99&from="+base.format("YYYYMMDDHHmm")+"&interval=20"
} 


document.getElementById('net-label').textContent = "Flujo entre estaciones del servicio BIZI Zaragoza";



</script>
</body>
</html>
	      



